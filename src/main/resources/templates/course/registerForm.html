<!DOCTYPE html>
<html
        xmlns:th = "http://www.thymeleaf.org">
<head th:replace = "fragments/header :: header">
<head>
</head>
<body>
    <div th:replace="/fragments/nav.html::nav"></div>
    <!--    #to do: -->
    <!--        이미지 입력 처리하기 -->
    <form id = "registerForm" action="/course/register" th:object="${courseRegisterDto}" method="post">
        <input type="file" accept="image/*" onchange="func(this)">
        <input th:field="*{cover}" type="text" placeholder="임시 cover 주소">
        <input th:field="*{courseName}" type="text" placeholder="제목을 입력하세요.">
        <input th:field="*{published}" type="checkbox">바로 공개하기
        <input th:field="*{introduction}" type="hidden">

        <select th:field="*{category}">
            <option th:each="category : ${T(com.glolearn.newbook.domain.Category).values()}"
                th:text = "${category.getValue()}"
                th:value = "${category.name()}">
            </option>
        </select>

        <div id = "editor"></div>
        <button type="button" onclick="register()">등록</button>
    </form>
</body>
<script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
<script>
    const Editor = toastui.Editor
    const editor = new Editor({
      el: document.querySelector('#editor'),
      height: '500px',
      initialEditType: 'markdown',
      previewStyle: 'vertical'
    })

    function func(file){
        imgFile = file.files[0]
        alert(imgFile.name)
    }

    function register(){
        document.getElementById('introduction').value = editor.getMarkdown()
        document.getElementById('registerForm').submit()
    }
</script>
</html>